{% extends 'AppBundle::layout.html.twig' %}

{% block javascript %}
    {{ parent() }}
    <script src="{{ asset('assets/vendor/moment/moment.js') }}"></script>
    <script src="{{ asset('assets/vendor/moment/locale/ru.js') }}"></script>
    <script src="{{ asset('assets/vendor/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js') }}"></script>
    <script>
        $(document).ready(function(){
            $('.form-calendar').datetimepicker({
                sideBySide: true,
                format: "DD.MM.YYYY"
            });
        });
    </script>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('assets/vendor/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css') }}" />
    <style>
        #form_start, #form_end{
            width: 130px;
        }
        #form_specialty{
            width: 250px;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="col-sm-12">
        <div class="title"><div>{{ category }}</div></div>
        <div class="filter">
            <form class="form">
                <div class="row">

                    <div class="form-group col-sm-6">
                        {{ form_widget(form.search) }}
                    </div>
                    <div class="form-group col-sm-6">
                        {{ form_widget(form.specialty) }}
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-3">
                        {{ form_widget(form.start) }}
                    </div>
                    <div class="form-group col-sm-3">
                        {{ form_widget(form.end) }}
                    </div>
                    <div class="form-group  col-sm-6">
                        {{ form_widget(form.submit) }}
                        {#<a href="{{ path('event_add') }}" style="padding-left: 35px;">Добавить событие</a>#}
                    </div>
                </div>
            </form>
        </div>
        {% for p in events %}
            <div class="new-item">
                <span style="padding-right: 20px; color: #888">
                    <span class="glyphicon glyphicon-calendar"></span>
                    {{ p.start | date('d.m.Y') }}{{ p.end != null ? ' - '~p.end | date('d.m.Y') : '' }}
                </span>
                <a href="{{ path('event', {'url' : p.id }) }}"><span class="new-item-title">{{ p.title }}</span></a>
                <div class="new-item-anons">
                    {{ p.body | anons | raw }}
                </div>
            </div>
        {% endfor %}
        <nav>
            {{ knp_pagination_render(events) }}
        </nav>
    </div>
{% endblock %}